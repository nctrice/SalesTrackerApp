
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SalesTrackerNEW (PWA)</title>
  <link rel="manifest" href="manifest.webmanifest">
  <meta name="theme-color" content="#0b7df2" />
  <link rel="icon" href="assets/icon-192.png" sizes="192x192">
  <link rel="apple-touch-icon" href="assets/icon-192.png">
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header>
    <h1>SalesTrackerNEW</h1>
    <nav class="tabs">
      <button class="tab-btn active" data-tab="payments">Payments</button>
      <button class="tab-btn" data-tab="receivables">Receivables</button>
      <button class="tab-btn" data-tab="stock">Stock</button>
    </nav>
  </header>

  <main>
    <!-- Payments Tab -->
    <section id="payments" class="tab-content active">
      <div class="card">
        <div class="card-head">
          <h2>Manage Ledgers</h2>
          <div class="inline">
            <input type="text" id="ledger-input" placeholder="New ledger name">
            <button id="ledger-add" class="secondary">Add Ledger</button>
          </div>
        </div>
        <div id="ledger-list" class="chips"></div>
      </div>

      <div class="card">
        <div class="card-head">
          <h2>Post a Payment</h2>
          <div class="inline">
            <label style="flex-direction:row;align-items:center;gap:6px">
              <input type="radio" name="pay-mode" id="mode-credit" checked> Credit payment
            </label>
            <label style="flex-direction:row;align-items:center;gap:6px">
              <input type="radio" name="pay-mode" id="mode-debit"> Debit invoice
            </label>
          </div>
        </div>
        <h3 class="muted">Select a mode above to reveal the form.</h3>

        <h2 class="visually-hidden">Add Payment (Credit)</h2>
        <form id="payment-form" class="hidden">
          <div class="grid-2">
            <label>Date <input type="date" id="p-date" required></label>
            <label>Payment name <input type="text" id="p-name" required placeholder="e.g., Company deposit"></label>
            <label>Payment type
              <select id="p-type" required>
                <option value="Transfer">Transfer</option>
                <option value="Cheque">Cheque</option>
              </select>
            </label>
            <label>Amount (₦) <input type="number" id="p-amount" required step="0.01" min="0"></label>
            <label>Ledger
              <select id="p-ledger" required></select>
            </label>
          </div>
          <button type="submit" class="primary">Save Payment</button>
        </form>

        <h2 class="visually-hidden">Add Debit</h2>
        <form id="debit-form" class="hidden">
          <div class="grid-2">
            <label>Date <input type="date" id="d-date" required></label>
            <label>Invoice type <input type="text" id="d-invtype" required placeholder="e.g., Expense, Charge"></label>
            <label>Invoice number <input type="text" id="d-invnum" required></label>
            <label>Amount (₦) <input type="number" id="d-amount" required step="0.01" min="0"></label>
            <label>Ledger
              <select id="d-ledger" required></select>
            </label>
          </div>
          <button type="submit" class="primary">Save Debit</button>
        </form>
      </div>

      <div class="card">
        <div class="card-head">
          <h2>Payments (All)</h2>
          <div>
            <button id="export-payments" class="secondary">Export All Payments</button>
          </div>
        </div>
        <p class="muted">Arranged from <strong>earliest to latest</strong>.</p>
        <table class="data-table" id="payments-table">
          <thead><tr><th>Date</th><th>Name</th><th>Type</th><th>Ledger</th><th class="right">Amount</th><th></th></tr></thead>
          <tbody></tbody>
          <tfoot><tr><td colspan="4" class="right">Total Credits</td><td class="right" id="payments-total">₦0</td><td></td></tr></tfoot>
        </table>
      </div>

      <div id="ledger-boards"></div>
    </section>

    <!-- Receivables Tab -->
    <section id="receivables" class="tab-content">
      <div class="card">
        <h2>Add Receivable</h2>
        <form id="receivable-form">
          <div class="grid-2">
            <label>Invoice date <input type="date" id="r-date" required></label>
            <label>Customer name
              <div class="inline">
                <input type="text" id="r-customer" required placeholder="e.g., ABC Pharmacy">
                <select id="r-fav-select" title="Quick select favorite" class="mini"></select>
              </div>
            </label>
            <label>Invoice number <input type="text" id="r-number" required></label>
            <label>Amount (₦) <input type="number" id="r-amount" required step="0.01" min="0"></label>
            <label class="span-2">Comment <input type="text" id="r-comment" placeholder="optional"></label>
          </div>
          <button type="submit" class="primary">Save Receivable</button>
        </form>
      </div>

      <div class="card">
        <div class="card-head">
          <h2>Receivables (All)</h2>
          <div>
            <button id="export-receivables" class="secondary">Export CSV</button>
          </div>
        </div>
        <p class="muted">Sorted by <strong>time of entry</strong> (newest first).</p>
        <table class="data-table" id="receivables-table">
          <thead><tr><th>Entered</th><th>Invoice Date</th><th>Customer</th><th>Invoice #</th><th class="right">Amount</th><th>Comment</th><th></th></tr></thead>
          <tbody></tbody>
          <tfoot><tr><td colspan="4" class="right">Total</td><td class="right" id="receivables-total">₦0</td><td></td><td></td></tr></tfoot>
        </table>
      </div>

      <div class="card">
        <div class="card-head">
          <h2>Favorite Customers</h2>
          <div class="inline">
            <input type="text" id="fav-input" placeholder="Type customer name">
            <button id="fav-add" class="secondary">Add</button>
          </div>
        </div>
        <p class="muted">Add up to five customers to maintain dedicated receivable boards below.</p>
        <div id="fav-list" class="chips"></div>
      </div>

      <div id="customer-boards"></div>
    </section>

    <!-- Stock Tab -->
    <section id="stock" class="tab-content">
      <div class="card">
        <h2>Add / Update Stock</h2>
        <form id="stock-form">
          <div class="grid-2">
            <label>Product
              <select id="s-product" required></select>
            </label>
            <label>Price (₦)
              <input type="number" id="s-price" step="0.01" min="0" disabled>
            </label>
            <label class="span-2">Quantity
              <input type="number" id="s-qty" min="0" step="1" value="0" required>
            </label>
          </div>
          <button type="submit" class="primary">Save Stock</button>
        </form>
      </div>

      <div class="card">
        <div class="card-head">
          <h2>Stock Inventory</h2>
          <div>
            <button id="export-inventory" class="secondary">Export CSV</button>
          </div>
        </div>
        <table class="data-table" id="inventory-table">
          <thead><tr><th>Product</th><th class="right">Price</th><th class="right">Qty</th><th class="right">Total Value</th><th></th></tr></thead>
          <tbody></tbody>
          <tfoot><tr><td colspan="3" class="right">Grand Total</td><td class="right" id="inventory-total">₦0</td><td></td></tr></tfoot>
        </table>
      </div>
    </section>
  </main>

  <footer>
    <small>SalesTrackerNEW PWA • LocalStorage • NGN</small>
  </footer>

  <script src="app.js"></script>
</body>
</html>
